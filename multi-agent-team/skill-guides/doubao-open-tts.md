# doubao-open-tts 使用指南

## 功能概述

doubao-open-tts 使用豆包（火山引擎）API 将文本转换为自然语音：
- 多种语音选择（男声/女声/童声）
- 可调节语速和音量
- 支持中英文混合
- 高质量音频输出

---

## 何时使用

### 适用场景
- **视频配音**: 为视频添加语音讲解
- **播客制作**: 将文本内容转为音频节目
- **语音助手**: 生成提示音或播报
- **内容无障碍**: 为文章提供音频版本
- **多语言内容**: 生成不同语言的语音

### 不适用场景
- 需要情感丰富的戏剧化朗读
- 需要特定人物声音克隆
- 实时语音合成（有延迟）

---

## 使用方法

### 方法1: 直接文本转语音

```
用户: 把这段文字转成语音："人工智能正在改变我们的生活方式。"

AI: 好的，使用 doubao-open-tts 为您生成语音。

read:0:{"path": "~/clawd/skills/doubao-open-tts/SKILL.md"}

[执行 TTS...]

✅ 语音文件已生成: /path/to/audio.mp3
```

### 方法2: 批量生成

```
用户: 帮我把这篇文章转成语音播客

AI: 好的，我将：
1. 读取文章内容
2. 分段处理（避免超长文本）
3. 生成语音文件
4. 合并为完整音频
```

---

## 常见参数

| 参数 | 类型 | 必填 | 说明 | 示例 |
|------|------|------|------|------|
| text | string | 是 | 要转换的文本 | "Hello world" |
| --voice | string | 否 | 语音类型 | "zh-CN-Xiaoxiao" |
| --speed | number | 否 | 语速 (0.5-2.0) | 1.0 |
| --volume | number | 否 | 音量 (0-100) | 100 |
| --output | path | 否 | 输出路径 | ./audio.mp3 |

### 语音选项

| 语音ID | 语言 | 性别 | 特点 |
|--------|------|------|------|
| zh-CN-Xiaoxiao | 中文 | 女 | 标准女声，自然 |
| zh-CN-Yunxi | 中文 | 男 | 标准男声，稳重 |
| zh-CN-Yunjian | 中文 | 男 | 新闻播报风格 |
| en-US-Jenny | 英文 | 女 | 标准美式英语 |
| en-US-Guy | 英文 | 男 | 标准美式英语 |

---

## 使用示例

### 示例1: 视频旁白

```
用户: 为我的视频添加中文旁白

AI: 请提供旁白文本，我将生成语音文件。

用户: [提供脚本]

AI: 处理中...

生成的音频可以与视频同步，使用 remotion 等工具合并。
```

### 示例2: 多语言内容

```
用户: 生成一段中英文混合的语音

AI: doubao TTS 支持中英文混合朗读。

文本示例：
"Hello everyone, 今天我们来学习 AI 的基础知识。"

生成的语音会自然切换中英文。
```

### 示例3: 调节语速

```
用户: 这段说明语速太快，能慢一点吗？

AI: 可以，将语速调整为 0.8 倍速。

参数: --speed 0.8
```

---

## 与其他技能配合

### + remotion-synced-video
视频配音完整流程：
```
1. 编写视频脚本
2. 使用 doubao-open-tts 生成配音
3. 在 remotion 中同步音画
4. 渲染最终视频
```

### + search-video-on-web-and-gen
添加配音到素材视频：
```
1. 搜索/下载视频素材
2. 生成解说词
3. 使用 TTS 生成配音
4. 合并音画
```

---

## 注意事项

1. **文本长度**: 单次转换有长度限制，长文本需要分段

2. **标点符号**: 合理使用标点可以优化停顿和语调

3. **特殊字符**: 避免使用特殊符号，可能影响语音效果

4. **文件格式**: 默认输出 MP3，音质良好且文件较小

5. **API 配额**: 注意豆包 API 的调用配额限制

---

## 故障排除

| 问题 | 可能原因 | 解决方案 |
|------|----------|----------|
| 生成失败 | API 配额用完 | 检查配额或等待重置 |
| 音质不佳 | 原始文本问题 | 检查文本是否有乱码 |
| 语速异常 | 参数设置错误 | 重置为默认速度 1.0 |
| 部分文字未读出 | 特殊字符 | 清理文本中的特殊符号 |
| 音频文件损坏 | 保存中断 | 重新生成 |

---

## 最佳实践

1. **文本预处理**:
   - 去除多余空格
   - 统一标点符号
   - 拆分过长段落

2. **语音选择**:
   - 正式内容: 使用稳重男声 (Yunxi)
   - 亲和内容: 使用自然女声 (Xiaoxiao)
   - 新闻播报: 使用新闻风格 (Yunjian)

3. **批量处理**:
   ```javascript
   // 长文本分段处理示例
   const chunks = splitText(longText, 500); // 每段500字
   const audioFiles = [];
   
   for (const chunk of chunks) {
     const audio = await tts(chunk, { voice: 'zh-CN-Xiaoxiao' });
     audioFiles.push(audio);
   }
   
   // 合并音频
   await mergeAudio(audioFiles, 'final.mp3');
   ```

---

## 快速参考

```bash
# 基础转换
./tts.sh "要转换的文本"

# 指定语音
./tts.sh "文本内容" --voice zh-CN-Xiaoxiao

# 调节语速
./tts.sh "文本内容" --speed 0.9

# 完整参数
./tts.sh \
  "文本内容" \
  --voice zh-CN-Xiaoxiao \
  --speed 1.0 \
  --volume 100 \
  --output ./output.mp3
```

---

## 相关链接

- SKILL.md 位置: `~/clawd/skills/doubao-open-tts/SKILL.md`
- 豆包语音文档: https://www.volcengine.com/docs/6561
- 示例音频: `~/clawd/skills/doubao-open-tts/examples/`
